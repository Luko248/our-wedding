@use '../base/mixins/index' as *;
@use '../base/variables/index' as *;

@mixin create-seating-plan {
    .plan {
        display: grid;
        grid-template-columns: repeat(7, 1fr);
        row-gap: $gap-l;
        column-gap: $gap-m;
        padding: 20dvb 25dvi;
    }

    .table {
        @include border-set-all($border-width-l);
        @include border-radius(m);
        @include padding-set-all($gap-m);
        background-color: var(--table_bg-color, $color-white);
        transition: background-color $trans-time $trans-fnc;
        position: relative;

        &:focus-within {
            --table_bg-color: #{lighten($color-primary, 35%)};
        }

        &:after {
            content: attr(data-title);
            position: absolute;
            font-family: $font-title;
            font-size: $gap-l;
        }

        &--main {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            aspect-ratio: 7 / 1.25;
            grid-column-end: span 7;
            place-items: center;

            &:after {
                left: 50%;
                bottom: calc(100% + $gap-m);
                translate: -50%;
            }
        }

        &:not(.table--main) {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            align-items: stretch;
            gap: $gap-l;
            place-items: center;

            &:after {
                writing-mode: vertical-rl;
                left: calc(100% + $gap-m);
                top: $gap-3xl;
            }
        }

        &--1 {
            grid-column: 1 / 2;
        }

        &--2 {
            grid-column: 4 / 5;
        }

        &--3 {
            grid-column: 7 / 8;
        }
    }

    .chair {
        --chair_bg-color: #{$color-secondary};
        --chair_border-color: #{$color-transparent};
        @include border-radius(circle);
        position: relative;
        background-color: var(--chair_bg-color);
        border-width: 0;
        aspect-ratio: 1;
        font-family: $font-text;
        block-size: $gap-3xl;
        font-size: $gap-l;
        z-index: 1;
        color: $color-white;

        &--selected {
            --chair_bg-color: #{$color-primary};
        }

        @include mq-hover {
            &:not(.chair--selected) {
                --chair_bg-color: grey;
            }
        }

        &:not(.chair--selected):focus {
            --chair_bg-color: grey;
        }

        &:before {
            content: attr(data-number);
        }
    }
}